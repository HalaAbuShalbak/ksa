<!DOCTYPE html>
<html lang="ar" dir="rtl" class="overflow-x-hidden">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="سجل حسابك الآن واستمتع بخدماتنا المميزة"
    />
    <title>إنشاء حساب جديد - خدماتنا</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@700;900&family=Tajawal:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#FF8059",
              secondary: "#5FD2BB",
              accent: "#FFCA3A",
              background: "#F7F9FA",
              contrast: "#22242A",
              card: "#FFFFFF",
              border: "#E0E3EB",
              muted: "#B0B2B8",
            },
            fontFamily: {
              cairo: ["Cairo", "sans-serif"],
              tajawal: ["Tajawal", "sans-serif"],
            },
          },
        },
      };
    </script>

    <!-- Custom Styles -->
    <style type="text/tailwindcss">
      * {
        box-sizing: border-box;
      }
      
      html {
        overflow-x: hidden !important;
        width: 100%;
        position: relative;
      }
      
      body {
        overflow-x: hidden !important;
        width: 100%;
        position: relative;
        margin: 0;
        padding: 0;
      }

      @layer components {
        .btn {
          @apply font-tajawal py-2.5 px-6 rounded-full text-base transition-all duration-300 ease-in-out shadow-md;
        }

        .btn-primary {
          @apply bg-primary text-white hover:bg-opacity-90;
        }

        .btn-secondary {
          @apply bg-transparent text-primary border border-primary hover:bg-primary hover:text-white;
        }

        .form-input {
          @apply w-full p-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-background text-contrast font-tajawal;
        }

        .form-label {
          @apply block text-sm font-medium text-contrast mb-2 font-tajawal;
        }

        .form-select {
          @apply w-full p-3 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-background text-contrast font-tajawal;
        }
      }

      @keyframes fade-in-up {
        0% {
          opacity: 0;
          transform: translateY(20px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .fade-in-up {
        animation: fade-in-up 0.8s ease-out forwards;
      }

      @keyframes blob-float {
        0%,
        100% {
          transform: translateY(0) scale(1);
        }
        33% {
          transform: translateY(-20px) scale(1.1);
        }
        66% {
          transform: translateY(20px) scale(0.9);
        }
      }

      .animate-blob-float {
        animation: blob-float 8s ease-in-out infinite;
      }
    </style>
  </head>
  <body class="font-tajawal text-contrast bg-background antialiased overflow-x-hidden min-h-screen">
    <!-- Animated Blobs Background -->
    <div class="absolute inset-0 z-0 opacity-20">
      <div
        class="blob-1 w-64 h-64 bg-primary rounded-full absolute top-1/4 left-1/4 animate-blob-float mix-blend-multiply filter blur-2xl"
      ></div>
      <div
        class="blob-2 w-96 h-96 bg-secondary rounded-full absolute bottom-1/3 right-1/4 animate-blob-float delay-1000 mix-blend-multiply filter blur-3xl"
      ></div>
      <div
        class="blob-3 w-80 h-80 bg-accent rounded-full absolute top-1/2 left-1/3 animate-blob-float delay-500 mix-blend-multiply filter blur-3xl"
      ></div>
    </div>

    <!-- Header -->
    <header
      class="sticky top-0 z-50 bg-background/80 backdrop-blur-md shadow-sm"
    >
      <nav
        class="container mx-auto px-4 py-3 flex items-center justify-between"
      >
        <div class="flex items-center">
          <a href="index.html" class="text-xl sm:text-2xl font-cairo font-bold text-primary"
            >شعارك</a
          >
        </div>

        <div class="flex items-center space-x-3 space-x-reverse">
          <a href="index.html" class="text-contrast hover:text-primary transition-colors font-tajawal">
            <i class="fas fa-arrow-right ml-2"></i>
            العودة للرئيسية
          </a>
        </div>
      </nav>
    </header>

    <!-- Main Content -->
    <main class="relative z-10 flex items-center justify-center min-h-[calc(100vh-80px)] py-12 px-4">
      <div class="w-full max-w-md fade-in-up">
        <!-- Sign Up Card -->
        <div class="bg-card rounded-2xl shadow-2xl p-8 md:p-10">
          <!-- Header -->
          <div class="text-center mb-8">
            <div class="w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
              <i class="fas fa-user-plus text-primary text-3xl"></i>
            </div>
            <h1 class="text-3xl font-cairo font-bold text-contrast mb-2">
              إنشاء حساب جديد
            </h1>
            <p class="text-muted font-tajawal">
              املأ البيانات التالية لإنشاء حسابك
            </p>
          </div>

          <!-- Form -->
          <form id="signup-form" class="space-y-5">
            <!-- Full Name -->
            <div>
              <label for="fullName" class="form-label">
                <i class="fas fa-user text-primary ml-2"></i>
                الاسم الكامل
              </label>
              <input
                type="text"
                id="fullName"
                name="fullName"
                class="form-input"
                placeholder="أدخل اسمك الكامل"
                required
              />
              <span class="error-message text-red-500 text-sm hidden"></span>
            </div>

            <!-- Service Name -->
            <div>
              <label for="serviceName" class="form-label">
                <i class="fas fa-store text-primary ml-2"></i>
                اسم الخدمة
              </label>
              <input
                type="text"
                id="serviceName"
                name="serviceName"
                class="form-input"
                placeholder="أدخل اسم الخدمة أو المطعم"
                required
              />
              <span class="error-message text-red-500 text-sm hidden"></span>
            </div>

            <!-- Email -->
            <div>
              <label for="email" class="form-label">
                <i class="fas fa-envelope text-primary ml-2"></i>
                البريد الإلكتروني
              </label>
              <input
                type="email"
                id="email"
                name="email"
                class="form-input"
                placeholder="example@email.com"
                required
              />
              <span class="error-message text-red-500 text-sm hidden"></span>
            </div>

            <!-- Mobile Number -->
            <div>
              <label for="mobileNumber" class="form-label">
                <i class="fas fa-phone text-primary ml-2"></i>
                رقم الجوال
              </label>
              <input
                type="tel"
                id="mobileNumber"
                name="mobileNumber"
                class="form-input"
                placeholder="05XXXXXXXX"
                pattern="[0-9]{10}"
                required
              />
              <span class="error-message text-red-500 text-sm hidden"></span>
            </div>

            <!-- Service Type -->
            <div>
              <label for="serviceType" class="form-label">
                <i class="fas fa-tags text-primary ml-2"></i>
                نوع الخدمة
              </label>
              <select
                id="serviceType"
                name="serviceType"
                class="form-select"
                required
              >
                <option value="">اختر نوع الخدمة</option>
                <option value="restaurant">مطعم</option>
                <option value="cafe">كافيه</option>
                <option value="bakery">مخبز</option>
                <option value="fast-food">وجبات سريعة</option>
                <option value="other">أخرى</option>
              </select>
              <span class="error-message text-red-500 text-sm hidden"></span>
            </div>

            <!-- Submit Button -->
            <button
              type="submit"
              id="signup-button"
              class="btn btn-primary w-full mt-6"
            >
              <i class="fas fa-user-plus ml-2"></i>
              إنشاء الحساب
            </button>

            <!-- Loading Spinner (hidden by default) -->
            <div id="loading-spinner" class="hidden text-center">
              <i class="fas fa-spinner fa-spin text-primary text-2xl"></i>
              <p class="text-muted mt-2">جاري إنشاء الحساب...</p>
            </div>

            <!-- Success Message (hidden by default) -->
            <div id="success-message" class="hidden bg-green-50 border border-green-200 rounded-lg p-4 text-center">
              <i class="fas fa-check-circle text-green-500 text-3xl mb-2"></i>
              <p class="text-green-700 font-semibold">تم إنشاء الحساب بنجاح!</p>
            </div>

            <!-- Error Message (hidden by default) -->
            <div id="error-message" class="hidden bg-red-50 border border-red-200 rounded-lg p-4 text-center">
              <i class="fas fa-exclamation-circle text-red-500 text-3xl mb-2"></i>
              <p class="text-red-700 font-semibold" id="error-text"></p>
            </div>
          </form>

          <!-- Login Link -->
          <div class="mt-6 text-center">
            <p class="text-muted font-tajawal">
              لديك حساب بالفعل؟
              <a href="#" class="text-primary hover:underline font-semibold">
                تسجيل الدخول
              </a>
            </p>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer
      class="bg-contrast text-white py-8 sm:py-10 md:py-12 animate-on-scroll"
    >
      <div
        class="container mx-auto px-4 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 sm:gap-8 text-center md:text-right"
      >
        <!-- Logo and Copyright -->
        <div>
          <a
            href="index.html"
            class="text-2xl font-cairo font-bold text-primary block mb-4"
            id="footer-logo"
          ></a>
          <p class="text-muted text-sm" id="footer-copyright"></p>
        </div>

        <!-- Quick Links -->
        <div>
          <h4 class="text-xl font-cairo font-bold text-white mb-4">
            روابط سريعة
          </h4>
          <ul class="space-y-2" id="footer-quick-links">
            <!-- Quick links will be injected by JS -->
          </ul>
        </div>

        <!-- Social Media -->
        <div>
          <h4 class="text-xl font-cairo font-bold text-white mb-4">تابعنا</h4>
          <div
            class="flex justify-center md:justify-end space-x-4 space-x-reverse"
            id="footer-socials"
          >
            <!-- Social icons will be injected by JS -->
          </div>
        </div>
      </div>
    </footer>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="./content.js"></script>
    
    <!-- Footer Content Script -->
    <script>
      // Populate Footer Section from content.js
      if (typeof content !== 'undefined' && content.footer) {
        $('#footer-logo').text(content.footer.logo);
        $('#footer-copyright').text(content.footer.copyright);

        const quickLinksContainer = $('#footer-quick-links');
        content.footer.quickLinks.forEach(link => {
          quickLinksContainer.append(`<li><a href="${link.href}" class="text-muted hover:text-primary transition-colors font-tajawal">${link.label}</a></li>`);
        });

        const socialIconsContainer = $('#footer-socials');
        content.footer.socials.forEach(social => {
          socialIconsContainer.append(`<a href="${social.href}" class="text-muted hover:text-primary transition-colors text-xl"><i class="${social.icon}"></i></a>`);
        });
      }
    </script>
    
    <!-- Sign Up Form Script -->
    <script>
      $(document).ready(function() {
        const form = $('#signup-form');
        const signupButton = $('#signup-button');
        const loadingSpinner = $('#loading-spinner');
        const successMessage = $('#success-message');
        const errorMessage = $('#error-message');
        const errorText = $('#error-text');

        // API endpoint - Replace with your actual API endpoint
        const API_ENDPOINT = 'https://your-api-endpoint.com/api/signup';

        // Form validation
        function validateForm() {
          let isValid = true;
          const fullName = $('#fullName').val().trim();
          const serviceName = $('#serviceName').val().trim();
          const email = $('#email').val().trim();
          const mobileNumber = $('#mobileNumber').val().trim();
          const serviceType = $('#serviceType').val();

          // Reset error messages
          $('.error-message').addClass('hidden').text('');

          // Validate Full Name
          if (!fullName) {
            $('#fullName').next('.error-message').text('الرجاء إدخال الاسم الكامل').removeClass('hidden');
            isValid = false;
          }

          // Validate Service Name
          if (!serviceName) {
            $('#serviceName').next('.error-message').text('الرجاء إدخال اسم الخدمة').removeClass('hidden');
            isValid = false;
          }

          // Validate Email
          if (!email) {
            $('#email').next('.error-message').text('الرجاء إدخال البريد الإلكتروني').removeClass('hidden');
            isValid = false;
          } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
            $('#email').next('.error-message').text('الرجاء إدخال بريد إلكتروني صحيح').removeClass('hidden');
            isValid = false;
          }

          // Validate Mobile Number
          if (!mobileNumber) {
            $('#mobileNumber').next('.error-message').text('الرجاء إدخال رقم الجوال').removeClass('hidden');
            isValid = false;
          } else if (!/^05\d{8}$/.test(mobileNumber)) {
            $('#mobileNumber').next('.error-message').text('الرجاء إدخال رقم جوال صحيح (05XXXXXXXX)').removeClass('hidden');
            isValid = false;
          }

          // Validate Service Type
          if (!serviceType) {
            $('#serviceType').next('.error-message').text('الرجاء اختيار نوع الخدمة').removeClass('hidden');
            isValid = false;
          }

          return isValid;
        }

        // Form submission
        form.on('submit', function(e) {
          e.preventDefault();

          // Hide previous messages
          successMessage.addClass('hidden');
          errorMessage.addClass('hidden');

          // Validate form
          if (!validateForm()) {
            return;
          }

          // Prepare form data
          const formData = {
            fullName: $('#fullName').val().trim(),
            serviceName: $('#serviceName').val().trim(),
            email: $('#email').val().trim(),
            mobileNumber: $('#mobileNumber').val().trim(),
            serviceType: $('#serviceType').val()
          };

          // Show loading state
          signupButton.addClass('hidden');
          loadingSpinner.removeClass('hidden');
          form.find('input, select').prop('disabled', true);

          // Send API request
          $.ajax({
            url: API_ENDPOINT,
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(formData),
            success: function(response) {
              // Hide loading spinner
              loadingSpinner.addClass('hidden');
              
              // Show success message
              successMessage.removeClass('hidden');
              
              // Reset form
              form[0].reset();
              
              // Scroll to success message
              $('html, body').animate({
                scrollTop: successMessage.offset().top - 100
              }, 500);

              // Optionally redirect after 2 seconds
              setTimeout(function() {
                // window.location.href = 'index.html'; // Uncomment to redirect
              }, 2000);
            },
            error: function(xhr, status, error) {
              // Hide loading spinner
              loadingSpinner.addClass('hidden');
              
              // Show error message
              let errorMsg = 'حدث خطأ أثناء إنشاء الحساب. الرجاء المحاولة مرة أخرى.';
              
              if (xhr.responseJSON && xhr.responseJSON.message) {
                errorMsg = xhr.responseJSON.message;
              } else if (xhr.status === 0) {
                errorMsg = 'لا يمكن الاتصال بالخادم. الرجاء التحقق من اتصالك بالإنترنت.';
              } else if (xhr.status === 400) {
                errorMsg = 'البيانات المدخلة غير صحيحة. الرجاء التحقق من البيانات والمحاولة مرة أخرى.';
              } else if (xhr.status === 409) {
                errorMsg = 'هذا الحساب موجود بالفعل. الرجاء تسجيل الدخول.';
              }

              errorText.text(errorMsg);
              errorMessage.removeClass('hidden');
              
              // Scroll to error message
              $('html, body').animate({
                scrollTop: errorMessage.offset().top - 100
              }, 500);
            },
            complete: function() {
              // Re-enable form
              signupButton.removeClass('hidden');
              form.find('input, select').prop('disabled', false);
            }
          });
        });

        // Real-time validation for email
        $('#email').on('input', function() {
          const value = $(this).val().trim();
          const errorSpan = $(this).next('.error-message');
          
          if (value && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
            errorSpan.text('الرجاء إدخال بريد إلكتروني صحيح').removeClass('hidden');
          } else {
            errorSpan.addClass('hidden');
          }
        });

        // Real-time validation for mobile number
        $('#mobileNumber').on('input', function() {
          const value = $(this).val().trim();
          const errorSpan = $(this).next('.error-message');
          
          if (value && !/^05\d{8}$/.test(value)) {
            errorSpan.text('الرجاء إدخال رقم جوال صحيح (05XXXXXXXX)').removeClass('hidden');
          } else {
            errorSpan.addClass('hidden');
          }
        });

        // Clear error messages on input
        form.find('input, select').on('input change', function() {
          $(this).next('.error-message').addClass('hidden');
        });
      });
    </script>
  </body>
</html>

